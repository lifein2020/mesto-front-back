{"ast":null,"code":"class Api {\n  constructor({\n    baseUrl,\n    headers\n  }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  } // Обработка ответа с сервера\n\n\n  _getResponse(response) {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(`Ошибка: ${response.status}`);\n  } // Получение данных пользователя(моих)\n\n\n  getUserInfo() {\n    console.log(this.headers);\n    return fetch(this.baseUrl + 'users/me', {\n      headers: this.headers\n    }).then(this._getResponse);\n  } // Получение данных всех карточек\n\n\n  getCardsList() {\n    return fetch(this.baseUrl + 'cards', {\n      // либо `${this.baseUrl}cards` и в результате конкатенации получается https://mesto.nomoreparties.co/v1/cohort-26/cards\n      headers: this.headers\n    }).then(this._getResponse);\n  } // Добавление карточек\n\n\n  postAddCard({\n    card_name,\n    card_image_link\n  }) {\n    return fetch(`${this.baseUrl}cards`, {\n      method: 'POST',\n      body: JSON.stringify({\n        name: card_name,\n        link: card_image_link\n      }),\n      headers: this.headers\n    }).then(this._getResponse);\n  } // Редактирование профиля\n\n\n  patchUserInfo({\n    userName,\n    userDescription\n  }) {\n    return fetch(this.baseUrl + 'users/me', {\n      //`${this.baseUrl}users/me`\n      method: 'PATCH',\n      body: JSON.stringify({\n        name: userName,\n        about: userDescription\n      }),\n      headers: this.headers\n    }).then(this._getResponse);\n  } // Смена аватара\n\n\n  patchAvatarUser({\n    avatarUrl\n  }) {\n    return fetch(this.baseUrl + 'users/me/avatar', {\n      //`${this.baseUrl}users/me/avatar`\n      method: 'PATCH',\n      body: JSON.stringify({\n        avatar: avatarUrl\n      }),\n      headers: this.headers\n    }).then(this._getResponse);\n  } // Удаление карточки\n\n\n  deleteCard(id) {\n    return fetch(`${this.baseUrl}cards/${id}`, {\n      method: 'DELETE',\n      headers: this.headers\n    }).then(this._getResponse);\n  } // Поставить лайк\n\n  /*putLikeCard(id) {\n    return fetch(`${this.baseUrl}cards/likes/${id}`, {\n      method: 'PUT',\n      headers: this.headers\n    })\n    .then(this._getResponse);\n  }\n   // Удалить лайк:\n  //--------- 2 вариант рабочий----------\n  deliteLikeCard(id) {\n    return fetch(`${this.baseUrl}cards/likes/${id}`, {\n      method: 'DELETE',\n      headers: this.headers\n    })\n    .then(this._getResponse);\n  }*/\n  //-------- 1 вариант рабочий---------\n\n\n  changeLikeCardStatus(id, like) {\n    return fetch(`${this.baseUrl}cards/likes/${id}`, {\n      method: like ? 'DELETE' : 'PUT',\n      //если карточка уже лайкнута(черный лайк), то удалить лайк, иначе поставить\n      headers: this.headers\n    }).then(this._getResponse);\n  }\n\n}\n\nconst api = new Api({\n  // baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-26/',\n  baseUrl: 'http://localhost:3005/',\n  headers: {\n    // authorization: 'd11963a5-3631-4d4e-b873-aed64d959e3c',\n    'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n    'Content-Type': 'application/json'\n  }\n});\nexport default api;","map":{"version":3,"sources":["/Users/svetlana/it/react-mesto-api-full/frontend/src/utils/Api.js"],"names":["Api","constructor","baseUrl","headers","_getResponse","response","ok","json","Promise","reject","status","getUserInfo","console","log","fetch","then","getCardsList","postAddCard","card_name","card_image_link","method","body","JSON","stringify","name","link","patchUserInfo","userName","userDescription","about","patchAvatarUser","avatarUrl","avatar","deleteCard","id","changeLikeCardStatus","like","api","localStorage","getItem"],"mappings":"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","sourcesContent":["class Api {\n  constructor ({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  // Обработка ответа с сервера\n  _getResponse(response) {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`Ошибка: ${response.status}`);\n  }\n\n  // Получение данных пользователя(моих)\n  getUserInfo() {\n    console.log(this.headers);\n    return fetch(this.baseUrl + 'users/me', {\n      headers: this.headers\n    }).then(this._getResponse);\n  }\n\n  // Получение данных всех карточек\n  getCardsList() {\n    return fetch(this.baseUrl + 'cards', { // либо `${this.baseUrl}cards` и в результате конкатенации получается https://mesto.nomoreparties.co/v1/cohort-26/cards\n      headers: this.headers\n    }).then(this._getResponse);\n  }\n\n  // Добавление карточек\n  postAddCard({ card_name, card_image_link }) {\n    return fetch(`${this.baseUrl}cards`, {\n      method: 'POST',\n      body: JSON.stringify({\n        name: card_name,\n        link: card_image_link\n      }),\n      headers: this.headers\n    }).then(this._getResponse);\n  }\n\n  // Редактирование профиля\n  patchUserInfo({userName, userDescription}) {\n    return fetch(this.baseUrl + 'users/me', { //`${this.baseUrl}users/me`\n      method: 'PATCH',\n      body: JSON.stringify({\n        name: userName,\n        about: userDescription,\n      }),\n      headers: this.headers\n    })\n    .then(this._getResponse);\n  }\n\n  // Смена аватара\n  patchAvatarUser({ avatarUrl }) {\n    return fetch(this.baseUrl + 'users/me/avatar', { //`${this.baseUrl}users/me/avatar`\n      method: 'PATCH',\n      body: JSON.stringify({\n        avatar: avatarUrl\n      }),\n      headers: this.headers\n    })\n    .then(this._getResponse);\n  }\n\n  // Удаление карточки\n  deleteCard(id) {\n    return fetch(`${this.baseUrl}cards/${id}`, {\n      method: 'DELETE',\n      headers: this.headers\n    })\n    .then(this._getResponse);\n  }\n\n  // Поставить лайк\n  /*putLikeCard(id) {\n    return fetch(`${this.baseUrl}cards/likes/${id}`, {\n      method: 'PUT',\n      headers: this.headers\n    })\n    .then(this._getResponse);\n  }\n\n  // Удалить лайк:\n  //--------- 2 вариант рабочий----------\n  deliteLikeCard(id) {\n    return fetch(`${this.baseUrl}cards/likes/${id}`, {\n      method: 'DELETE',\n      headers: this.headers\n    })\n    .then(this._getResponse);\n  }*/\n\n  //-------- 1 вариант рабочий---------\n  changeLikeCardStatus(id, like) {\n    return fetch(`${this.baseUrl}cards/likes/${id}`, {\n      method: like ? 'DELETE' : 'PUT', //если карточка уже лайкнута(черный лайк), то удалить лайк, иначе поставить\n      headers: this.headers\n    })\n    .then(this._getResponse);\n  }\n\n}\n\nconst api = new Api({\n  // baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-26/',\n  baseUrl: 'http://localhost:3005/',\n  headers: {\n    // authorization: 'd11963a5-3631-4d4e-b873-aed64d959e3c',\n    'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;\n\n"]},"metadata":{},"sourceType":"module"}